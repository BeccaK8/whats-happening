{% extends 'base.html' %}
{% block content %}

<!-- details page  -->

<h1 class="center-align">{{ event.name }} at {{ event.venue }}</h1>

<div class="row">
    <div class="col s6">
        <div class="card">
            <div class="card-content">
                <span class="card-title">{{ event.name }}</span>
                <p><strong>Date:</strong> {{ event.date }} at {{ event.time }}{% if event.end_time %} - {{ event.end_time }}{% endif %}</p>
                <p><strong>Venue:</strong> {{ event.venue }}</p>
                <p>Location: {{ event.location }}</p>
                </div>
            </div>
        </div>
    <div class="col s6">
        <div class = "card">
            <div class="card-content">
            <p><strong>Hosted by:</strong> {{ event.owner }}</p>
            <hr>
            <p>{{ event.description }}</p>
            </div>
        </div>
    </div>
</div>

<!-- Display photos -->
{% for photo in event.photo_set.all %}
  <img class="responsive-img card-panel" src="{{photo.image_url}}">
 
{% empty %}
  <div class="card-panel teal-text center-align">No Photos Uploaded</div>
{% endfor %}

<form action="{% url 'add_event_photo' event.id %}" enctype="multipart/form-data" method="POST" class="card-panel">
    {% csrf_token %}
    <input type="file" name="photo-file">
    <br><br>
    <button type="submit" class="btn">Upload Photo</button>
</form>

{% if request.user == event.owner %}
<div class = "options">
    <h2>User Options</h2>
    <a class="btn" href="{% url 'event_edit' event.id %}"><i class="fas fa-edit"></i>Edit</a>
    <br>
    <a class="btn" href="{% url 'event_delete' event.id %}"><i class="fas fa-trash-alt"></i>Delete</a>
</div>
{% else %}
<div class = "options">
    <h2>User Options</h2>
    <br>
    {% if reservation %}
        <form action="{% url 'event_edit_reservation' event.id reservation.id %}" method="post">
            {% csrf_token %}
            <div class="input-field inline">
                <label for="guests">Guest Count:</label>
                <input type="text" name="guests" value="{{ reservation.guests }}" id="guests">
            </div>
            <br>
            <button type="submit" class="btn"><i class="fas fa-calendar-plus"></i> Update Guest Count</button>
        </form>
        <br>
        <form action="{% url 'unassoc_reservation' event.id reservation.id %}" method="post">
            {% csrf_token %}
            <button type="submit" class="btn"><i class="fas fa-calendar-minus"></i> I'm Not Going!</button>
        </form>
    {% else %}
        <form action="{% url 'assoc_reservation' event.id %}" method="post">
            {% csrf_token %}           
            <div class="input-field inline">
                <label for="guests">Guest Count:</label>
                <input type="text" name="guests" value="0" id="guests">
            </div>
            <br>
            <button type="submit" class="btn"><i class="fas fa-calendar-plus"></i> I'm Going!</button>
        </form>
    {% endif %}
</div>
<br>
{% endif %}


{% endblock %}













